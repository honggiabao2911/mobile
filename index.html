<!doctype html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="theme-color" content="#020617" />
  <title>H·ªìng Gia B·∫£o | Portfolio</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üõ°Ô∏è</text></svg>">

  <style>
    /* ===========================================================
       H·ªíNG GIA B·∫¢O ‚Äî CYBER PORTFOLIO (MOBILE-FIRST)
       - Touch first, no hover-only features.
       - Multi-layer graphics: Matrix + Particles + Aurora + Grid.
       - Holo cards + glare + scanlines + glitch typography.
       - Performance tiers: Low / Medium / Ultra.
       =========================================================== */

    :root{
      /* Layout */
      --max: 1080px;
      --radius: 26px;
      --radius2: 18px;
      --pad: 16px;
      --pad2: 22px;
      --navH: 64px;

      /* Light */
      --bg: #f0f9ff;
      --bg2: #e0f2fe;
      --text: #0b1220;
      --muted: rgba(15, 23, 42, 0.62);

      --card: rgba(255,255,255,0.78);
      --card2: rgba(255,255,255,0.55);
      --border: rgba(2, 132, 199, 0.22);

      --accent: #0284c7;
      --neon: #06b6d4;
      --purple: #7c3aed;
      --pink: #ec4899;

      --shadow: 0 18px 50px rgba(2, 132, 199, 0.12);
      --shadow2: 0 10px 20px rgba(2, 132, 199, 0.10);

      /* FX */
      --glow: 0 0 18px rgba(6, 182, 212, 0.25);
      --glow2: 0 0 40px rgba(6, 182, 212, 0.18);
      --scanOpacity: 0.18;
      --grainOpacity: 0.06;
      --gridOpacity: 0.06;
      --speed: 1; /* scale for animations */
      --tilt: 10deg;

      /* Safe area */
      --sat: env(safe-area-inset-top, 0px);
      --sar: env(safe-area-inset-right, 0px);
      --sab: env(safe-area-inset-bottom, 0px);
      --sal: env(safe-area-inset-left, 0px);

      /* Control variables for JS */
      --rx: 0deg;
      --ry: 0deg;
      --mx: 50%;
      --my: 50%;
    }

    body.dark-mode{
      --bg: #050a10;
      --bg2: #040913;
      --text: #e6f4ff;
      --muted: rgba(226, 232, 240, 0.68);

      --card: rgba(12, 20, 34, 0.62);
      --card2: rgba(12, 20, 34, 0.38);
      --border: rgba(56, 189, 248, 0.16);

      --accent: #38bdf8;
      --neon: #00f2ea;
      --purple: #a855f7;
      --pink: #fb7185;

      --shadow: 0 26px 60px rgba(0,0,0,0.55);
      --shadow2: 0 14px 26px rgba(0,0,0,0.35);

      --glow: 0 0 22px rgba(0, 242, 234, 0.22);
      --glow2: 0 0 60px rgba(0, 242, 234, 0.14);
      --scanOpacity: 0.22;
      --grainOpacity: 0.08;
      --gridOpacity: 0.07;
    }

    *{box-sizing:border-box; margin:0; padding:0}
    html{scroll-behavior:smooth}
    body{
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background: radial-gradient(circle at 14% 36%, rgba(2, 132, 199, 0.10), transparent 35%),
                  radial-gradient(circle at 86% 28%, rgba(124, 58, 237, 0.10), transparent 35%),
                  linear-gradient(180deg, var(--bg), var(--bg2));
      color: var(--text);
      overflow-x:hidden;
      transition: background 400ms ease, color 300ms ease;
      -webkit-tap-highlight-color: transparent;
      touch-action: manipulation;
    }

    /* ====== GLOBAL CANVAS LAYERS ====== */
    .fxStack{
      position:fixed; inset:0;
      z-index:-5;
      pointer-events:none;
    }
    canvas.fx{ position:absolute; inset:0; width:100%; height:100%; }
    /* Subtle overlay grid */
    .gridOverlay{
      position:fixed; inset:0;
      z-index:-4; pointer-events:none;
      background-image:
        linear-gradient(to right, rgba(56,189,248,var(--gridOpacity)) 1px, transparent 1px),
        linear-gradient(to bottom, rgba(56,189,248,var(--gridOpacity)) 1px, transparent 1px);
      background-size: 44px 44px;
      mask-image: radial-gradient(circle at 50% 30%, #000 0%, transparent 70%);
      transition: 400ms ease;
    }
    /* Film grain */
    .grain{
      position:fixed; inset:-40%;
      z-index:-3; pointer-events:none;
      opacity: var(--grainOpacity);
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='420' height='420'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='420' height='420' filter='url(%23n)' opacity='.55'/%3E%3C/svg%3E");
      background-size: 320px 320px;
      mix-blend-mode: overlay;
      transform: rotate(9deg);
      animation: grainMove calc(8s / var(--speed)) steps(2) infinite;
    }
    @keyframes grainMove{
      0%{ transform: translate3d(-2%, -2%, 0) rotate(9deg) }
      25%{ transform: translate3d(2%, -1%, 0) rotate(9deg) }
      50%{ transform: translate3d(1%, 2%, 0) rotate(9deg) }
      75%{ transform: translate3d(-1%, 1%, 0) rotate(9deg) }
      100%{ transform: translate3d(-2%, -2%, 0) rotate(9deg) }
    }

    /* Reduced motion */
    @media (prefers-reduced-motion: reduce){
      :root{ --speed: 0.001; }
      html{ scroll-behavior: auto; }
      .grain{ animation: none; }
    }

    /* ====== TOP PROGRESS BAR ====== */
    .scrollProg{
      position:fixed;
      top:0; left:0;
      width:100%;
      height: 3px;
      z-index: 999;
      background: rgba(255,255,255,0.0);
    }
    .scrollProg > i{
      display:block; height:100%; width:0%;
      background: linear-gradient(90deg, var(--accent), var(--neon), var(--purple), var(--pink));
      filter: drop-shadow(0 0 8px rgba(6,182,212,0.4));
      transition: width 60ms linear;
    }

    /* ====== HEADER / NAV ====== */
    header{
      position: sticky; top:0;
      z-index: 200;
      height: var(--navH);
      padding-top: var(--sat);
      backdrop-filter: blur(18px);
      background: rgba(240,249,255,0.72);
      border-bottom: 1px solid var(--border);
      transition: 350ms ease;
    }
    body.dark-mode header{ background: rgba(5,10,16,0.72); }

    .nav{
      height: calc(var(--navH) - 0px);
      max-width: var(--max);
      margin: 0 auto;
      padding: 10px calc(var(--pad) + var(--sal)) 10px calc(var(--pad) + var(--sal));
      padding-right: calc(var(--pad) + var(--sar));
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
    }

    .brand{
      display:flex; align-items:center; gap:10px;
      min-width: 0;
      user-select:none;
    }
    .mark{
      width: 42px; height: 42px; border-radius: 14px;
      display:grid; place-items:center;
      font-weight: 900;
      background: radial-gradient(circle at 30% 30%, rgba(56,189,248,0.25), transparent 60%),
                  linear-gradient(135deg, rgba(56,189,248,0.20), rgba(0,242,234,0.14));
      border: 1px solid rgba(56,189,248,0.35);
      color: var(--neon);
      box-shadow: var(--glow);
      position:relative;
      overflow:hidden;
      transform: translateZ(0);
    }
    .mark:before{
      content:"";
      position:absolute; inset:-40%;
      background: conic-gradient(from 180deg, rgba(0,242,234,0.0), rgba(0,242,234,0.35), rgba(168,85,247,0.25), rgba(0,242,234,0.0));
      animation: spin calc(5.5s / var(--speed)) linear infinite;
      opacity: 0.65;
    }
    .mark b{ position:relative; z-index:2; letter-spacing:0.5px }
    @keyframes spin{ to{ transform: rotate(360deg)} }

    .brand span{
      font-weight: 900;
      letter-spacing: 0.2px;
      white-space: nowrap;
      overflow:hidden;
      text-overflow: ellipsis;
      max-width: 52vw;
    }

    /* Buttons / controls */
    .ctrlRow{ display:flex; align-items:center; gap:8px; }

    .pillBtn{
      height: 40px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: rgba(255,255,255,0.55);
      color: var(--text);
      padding: 0 12px;
      display:inline-flex;
      align-items:center;
      gap: 8px;
      font-weight: 800;
      font-size: 13px;
      cursor:pointer;
      user-select:none;
      position:relative;
      overflow:hidden;
      transform: translateZ(0);
      transition: 250ms ease;
    }
    body.dark-mode .pillBtn{ background: rgba(12,20,34,0.5); }
    .pillBtn:active{ transform: scale(0.98); }
    .pillBtn:focus-visible{ outline: 2px solid rgba(0,242,234,0.55); outline-offset:2px; }
    .pillBtn svg{ width:18px; height:18px; }

    .pillBtn.rippleHost::after{
      content:"";
      position:absolute; inset:0;
      background: radial-gradient(circle at var(--mx) var(--my), rgba(255,255,255,0.40), transparent 40%);
      opacity:0;
      transition: opacity 350ms ease;
      pointer-events:none;
    }
    .pillBtn.rippleHost.isRippling::after{ opacity:1; }

    /* Mobile drawer */
    .burger{ width: 42px; padding: 0 10px; justify-content:center; }
    .burger i{
      width: 18px; height: 2px; background: currentColor;
      position: relative; display:block;
    }
    .burger i::before, .burger i::after{
      content:"";
      position:absolute; left:0;
      width:18px; height:2px; background: currentColor;
      transition: 220ms ease;
    }
    .burger i::before{ top:-6px; }
    .burger i::after{ top:6px; }

    /* Desktop nav list hidden on mobile */
    nav ul{ list-style:none; display:none; gap:6px; align-items:center; }
    nav a{
      text-decoration:none;
      color: var(--muted);
      font-weight: 800;
      font-size: 13px;
      padding: 9px 12px;
      border-radius: 14px;
      transition: 260ms ease;
      position:relative;
      overflow:hidden;
    }
    nav a:focus-visible{ outline: 2px solid rgba(0,242,234,0.55); outline-offset:2px; }
    nav a.active{ color: var(--neon); background: rgba(56,189,248,0.12); }
    nav a:active{ transform: scale(0.98); }

    @media (min-width: 860px){
      nav ul{ display:flex; }
      .burger{ display:none; }
      .brand span{ max-width: 260px; }
    }

    .drawerMask{
      position:fixed; inset:0;
      background: rgba(0,0,0,0.45);
      z-index: 250;
      opacity: 0; pointer-events:none;
      transition: 250ms ease;
    }
    .drawerMask.show{ opacity:1; pointer-events:auto; }
    .drawer{
      position:fixed;
      top:0; right:0;
      height:100%;
      width: min(88vw, 380px);
      z-index: 260;
      background: linear-gradient(180deg, rgba(255,255,255,0.85), rgba(255,255,255,0.72));
      border-left: 1px solid var(--border);
      backdrop-filter: blur(18px);
      transform: translateX(102%);
      transition: 300ms cubic-bezier(0.2, 0.8, 0.2, 1);
      padding: calc(var(--sat) + 14px) 14px calc(var(--sab) + 18px) 14px;
      display:flex;
      flex-direction:column;
      gap: 12px;
    }
    body.dark-mode .drawer{
      background: linear-gradient(180deg, rgba(5,10,16,0.88), rgba(5,10,16,0.72));
    }
    .drawer.show{ transform: translateX(0); }
    .drawerHead{
      display:flex; align-items:center; justify-content:space-between;
      padding: 6px 6px 10px 6px;
      border-bottom: 1px solid var(--border);
    }
    .drawerHead b{ font-size: 14px; letter-spacing: 0.6px; }
    .drawer a{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      text-decoration:none;
      color: var(--text);
      padding: 12px 12px;
      border-radius: 16px;
      border: 1px solid rgba(56,189,248,0.12);
      background: rgba(56,189,248,0.06);
      font-weight: 900;
      transition: 200ms ease;
    }
    .drawer a:active{ transform: scale(0.98); }
    .drawer a small{ color: var(--muted); font-weight: 800; }

    /* ====== MAIN ====== */
    main{
      max-width: var(--max);
      margin: 0 auto;
      padding: 18px calc(var(--pad) + var(--sal)) 90px calc(var(--pad) + var(--sal));
      padding-right: calc(var(--pad) + var(--sar));
    }

    /* ====== HERO ====== */
    .hero{
      min-height: calc(100svh - var(--navH));
      display:flex;
      flex-direction:column;
      justify-content:center;
      align-items:center;
      text-align:center;
      gap: 14px;
      padding-top: 10px;
      position:relative;
    }

    .heroTopMeta{
      display:flex;
      flex-wrap:wrap;
      justify-content:center;
      gap: 8px;
      margin-top: 8px;
      opacity: 0.92;
    }
    .metaTag{
      display:inline-flex; align-items:center; gap:8px;
      border: 1px solid rgba(56,189,248,0.22);
      background: rgba(56,189,248,0.06);
      padding: 8px 12px;
      border-radius: 999px;
      font-weight: 900;
      font-size: 12px;
      color: var(--text);
      box-shadow: var(--shadow2);
      transform: translateZ(0);
    }
    body.dark-mode .metaTag{ background: rgba(56,189,248,0.07); }
    .metaTag svg{ width: 16px; height: 16px; color: var(--neon); filter: drop-shadow(0 0 6px rgba(0,242,234,0.35)); }

    .avatarStage{
      width: min(360px, 86vw);
      height: min(420px, 64vh);
      display:grid;
      place-items:center;
      position:relative;
      transform-style: preserve-3d;
      will-change: transform;
      animation: enter calc(850ms / var(--speed)) cubic-bezier(0.2, 0.8, 0.2, 1) both;
    }
    @keyframes enter{
      from{ opacity:0; transform: translateY(28px) scale(0.98) }
      to{ opacity:1; transform: translateY(0) scale(1) }
    }

    .orbital{
      position:absolute; inset:-10%;
      pointer-events:none;
      filter: drop-shadow(0 0 18px rgba(6,182,212,0.18));
      opacity: 0.75;
      transform: translateZ(-40px);
    }
    .orbital:before, .orbital:after{
      content:"";
      position:absolute; inset:0;
      border-radius: 999px;
      border: 1px solid rgba(56,189,248,0.26);
      mask-image: radial-gradient(circle at center, transparent 32%, #000 46%, #000 60%, transparent 72%);
      animation: orbit calc(10s / var(--speed)) linear infinite;
    }
    .orbital:after{
      inset: 12%;
      border-color: rgba(168,85,247,0.22);
      animation-duration: calc(13s / var(--speed));
      animation-direction: reverse;
    }
    @keyframes orbit{ to{ transform: rotate(360deg) } }

    .water{
      position:absolute;
      bottom: 48px;
      width: min(360px, 92vw);
      height: 120px;
      pointer-events:none;
      transform: translateZ(-30px);
    }
    .surface{
      position:absolute; inset:0;
      border-radius: 50%;
      background: radial-gradient(closest-side, rgba(2,132,199,0.16), transparent 75%);
      border: 1px solid rgba(2,132,199,0.12);
      box-shadow: 0 0 26px rgba(2,132,199,0.20);
      animation: surfaceBeat calc(1.9s / var(--speed)) ease-in-out infinite;
    }
    body.dark-mode .surface{
      background: radial-gradient(closest-side, rgba(0,242,234,0.16), transparent 75%);
      border-color: rgba(0,242,234,0.12);
    }
    @keyframes surfaceBeat{
      0%,100%{ transform: scale(1); opacity:0.85 }
      50%{ transform: scale(0.90); opacity:0.55 }
    }
    .rip{
      position:absolute; left:50%; top:50%;
      width:100%; height:100%;
      transform: translate(-50%,-50%) scale(0.15);
      border-radius: 50%;
      border: 2px solid rgba(2,132,199,0.55);
      opacity: 0;
      animation: ripple calc(2.1s / var(--speed)) linear infinite;
    }
    body.dark-mode .rip{ border-color: rgba(255,255,255,0.58); box-shadow: 0 0 12px rgba(0,242,234,0.35); }
    .rip.r2{ animation-delay: 0.35s; }
    .rip.r3{ animation-delay: 0.70s; }
    @keyframes ripple{
      0%{ opacity:0; transform: translate(-50%,-50%) scale(0.15) }
      12%{ opacity:1 }
      100%{ opacity:0; transform: translate(-50%,-50%) scale(1.55) }
    }

    .avatarWrap{
      width: min(260px, 68vw);
      height: min(260px, 68vw);
      border-radius: 34px;
      overflow:hidden;
      position:relative;
      background: #000;
      box-shadow: var(--shadow);
      border: 1px solid rgba(255,255,255,0.08);
      transform-style: preserve-3d;
      will-change: transform, filter;
      transform: rotateX(var(--rx)) rotateY(var(--ry));
    }
    .avatarWrap img{
      width:100%; height:100%;
      object-fit:cover;
      display:block;
      transform: scale(1.04);
      filter: contrast(1.06) saturate(1.06);
    }

    /* Holo & scanlines overlay */
    .avatarWrap::before{
      content:"";
      position:absolute; inset:-2px;
      background:
        radial-gradient(circle at var(--mx) var(--my), rgba(255,255,255,0.18), transparent 40%),
        conic-gradient(from 90deg at 50% 50%,
          rgba(0,242,234,0.00),
          rgba(0,242,234,0.18),
          rgba(168,85,247,0.14),
          rgba(236,72,153,0.12),
          rgba(0,242,234,0.00));
      mix-blend-mode: screen;
      opacity: 0.55;
      animation: holo calc(6.5s / var(--speed)) linear infinite;
      pointer-events:none;
      transform: translateZ(20px);
    }
    @keyframes holo{
      0%{ filter:hue-rotate(0deg) }
      100%{ filter:hue-rotate(360deg) }
    }
    .avatarWrap::after{
      content:"";
      position:absolute; inset:0;
      background:
        linear-gradient(to bottom, rgba(255,255,255,var(--scanOpacity)) 0px, transparent 10px),
        repeating-linear-gradient(
          to bottom,
          rgba(255,255,255,0.05),
          rgba(255,255,255,0.05) 1px,
          transparent 1px,
          transparent 4px
        );
      mix-blend-mode: overlay;
      opacity: 0.55;
      pointer-events:none;
    }

    .scanLine{
      position:absolute;
      left:-20%; right:-20%;
      height: 4px;
      background: rgba(255,255,255,0.96);
      box-shadow: 0 0 10px rgba(255,255,255,0.8), 0 0 22px var(--accent), 0 0 38px var(--neon);
      opacity: 0;
      top:-10%;
      transform: rotate(-5deg);
      animation: scanDown calc(2.6s / var(--speed)) ease-out 1 both;
      pointer-events:none;
      z-index: 3;
    }
    @keyframes scanDown{
      0%{ top:-12%; opacity:0 }
      10%{ opacity:1 }
      100%{ top:120%; opacity:0 }
    }

    /* Name & subtitle */
    .name{
      font-size: clamp(38px, 7.4vw, 62px);
      font-weight: 1000;
      letter-spacing: -0.8px;
      margin-top: 2px;
      background: linear-gradient(90deg, var(--text), var(--accent), var(--neon));
      -webkit-background-clip:text; background-clip:text;
      color: transparent;
      filter: drop-shadow(0 10px 24px rgba(2,132,199,0.12));
      position:relative;
    }

    .glitch{
      position:relative;
      display:inline-block;
      transform: translateZ(0);
    }
    .glitch::before, .glitch::after{
      content: attr(data-text);
      position:absolute; left:0; top:0;
      width:100%;
      -webkit-background-clip:text; background-clip:text;
      color: transparent;
      background: linear-gradient(90deg, var(--neon), var(--purple));
      mix-blend-mode: screen;
      opacity: 0;
      pointer-events:none;
    }
    .glitch.pulse::before{
      opacity: 0.55;
      transform: translate3d(1px, 0, 0);
      clip-path: inset(0 0 55% 0);
    }
    .glitch.pulse::after{
      opacity: 0.45;
      transform: translate3d(-1px, 0, 0);
      clip-path: inset(45% 0 0 0);
    }

    .subtitle{
      display:flex;
      align-items:center;
      justify-content:center;
      gap: 6px;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      color: var(--accent);
      font-weight: 900;
      font-size: 15px;
      min-height: 24px;
      opacity: 0.96;
    }
    .cursor{
      width: 10px; height: 18px;
      background: var(--neon);
      border-radius: 4px;
      animation: blink calc(1s / var(--speed)) infinite;
      box-shadow: var(--glow);
    }
    @keyframes blink{ 0%,100%{opacity:1} 50%{opacity:0} }

    /* CTA chips */
    .chips{
      display:flex;
      flex-wrap:wrap;
      justify-content:center;
      gap: 12px;
      margin-top: 16px;
    }
    .chip{
      display:inline-flex;
      align-items:center;
      gap:10px;
      border-radius: 999px;
      padding: 12px 18px;
      text-decoration:none;
      color: var(--text);
      font-weight: 950;
      font-size: 14px;
      border: 1px solid rgba(56,189,248,0.24);
      background: linear-gradient(135deg, rgba(255,255,255,0.70), rgba(56,189,248,0.08));
      box-shadow: var(--shadow2);
      position:relative;
      overflow:hidden;
      transform: translateZ(0);
      transition: 220ms ease;
    }
    body.dark-mode .chip{
      background: linear-gradient(135deg, rgba(12,20,34,0.70), rgba(56,189,248,0.08));
    }
    .chip svg{ width: 20px; height: 20px; color: var(--neon); filter: drop-shadow(0 0 8px rgba(0,242,234,0.25)); }
    .chip:active{ transform: scale(0.985); }
    .chip::after{
      content:"";
      position:absolute; inset:0;
      background: radial-gradient(circle at var(--mx) var(--my), rgba(0,242,234,0.22), transparent 40%);
      opacity:0;
      transition: opacity 260ms ease;
      pointer-events:none;
    }
    .chip.isRippling::after{ opacity:1; }

    /* ====== SECTIONS / CARDS ====== */
    .section{ margin-top: 22px; }

    .card{
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 22px;
      box-shadow: var(--shadow);
      backdrop-filter: blur(14px);
      position:relative;
      overflow:hidden;
      transform-style: preserve-3d;
      will-change: transform;
      transition: 260ms ease;
    }

    /* Holo sheen layer */
    .card::before{
      content:"";
      position:absolute;
      inset:-1px;
      background:
        radial-gradient(circle at var(--mx) var(--my), rgba(255,255,255,0.18), transparent 45%),
        conic-gradient(from 120deg at 50% 50%, rgba(0,242,234,0.0), rgba(0,242,234,0.18), rgba(168,85,247,0.12), rgba(236,72,153,0.08), rgba(0,242,234,0.0));
      opacity: 0.25;
      mix-blend-mode: screen;
      pointer-events:none;
      transform: translateZ(20px);
      filter: blur(0.2px);
    }

    /* Micro scanlines on card */
    .card::after{
      content:"";
      position:absolute;
      inset:0;
      background: repeating-linear-gradient(
        to bottom,
        rgba(255,255,255,0.05),
        rgba(255,255,255,0.05) 1px,
        transparent 1px,
        transparent 5px
      );
      opacity: 0.10;
      mix-blend-mode: overlay;
      pointer-events:none;
    }

    .card.touchTilt{
      transform: rotateX(var(--rx)) rotateY(var(--ry));
    }

    .card:active{ transform: scale(0.99) rotateX(var(--rx)) rotateY(var(--ry)); }

    .head{
      display:flex;
      align-items:center;
      gap: 14px;
      padding-bottom: 14px;
      margin-bottom: 16px;
      border-bottom: 1px solid var(--border);
    }
    .iconBox{
      width: 50px; height: 50px;
      border-radius: 16px;
      background: linear-gradient(135deg, rgba(56,189,248,0.16), rgba(0,242,234,0.07));
      border: 1px solid rgba(56,189,248,0.28);
      display:grid;
      place-items:center;
      box-shadow: var(--glow);
      position:relative;
      overflow:hidden;
      transform: translateZ(0);
    }
    .iconBox::before{
      content:"";
      position:absolute; inset:-60%;
      background: conic-gradient(from 180deg, rgba(0,242,234,0), rgba(0,242,234,0.32), rgba(168,85,247,0.22), rgba(0,242,234,0));
      animation: spin calc(7s / var(--speed)) linear infinite;
      opacity: 0.65;
    }
    .headIcon{
      width: 26px; height: 26px;
      color: var(--neon);
      position:relative; z-index:2;
      filter: drop-shadow(0 0 6px rgba(0,242,234,0.35));
    }

    .head h2{
      font-size: 20px;
      font-weight: 1000;
      text-transform: uppercase;
      letter-spacing: 0.7px;
      background: linear-gradient(90deg, var(--text), var(--accent), var(--neon));
      -webkit-background-clip:text; background-clip:text;
      color: transparent;
    }
    .card p{
      color: var(--muted);
      line-height: 1.75;
      font-size: 15px;
    }
    .card b{ color: var(--text); font-weight: 950; }

    /* Grid sections */
    .grid2{
      display:grid;
      grid-template-columns: 1fr;
      gap: 16px;
    }
    @media(min-width: 820px){
      .grid2{ grid-template-columns: 1fr 1fr; }
      .card{ padding: 26px; }
    }

    /* Skill list */
    .skillList{
      list-style:none;
      display:flex;
      flex-direction:column;
      gap: 14px;
      margin-top: 2px;
    }
    .skillList li{
      display:flex;
      gap: 12px;
      align-items:flex-start;
      color: var(--muted);
      font-weight: 800;
      font-size: 14px;
      line-height: 1.55;
    }
    .skillIcon{
      width: 22px; height:22px;
      flex-shrink:0;
      color: var(--neon);
      background: rgba(56,189,248,0.12);
      border: 1px solid rgba(56,189,248,0.18);
      border-radius: 8px;
      padding: 3px;
      box-shadow: var(--glow);
    }

    /* Project tiles */
    .projectGrid{
      display:grid;
      grid-template-columns: 1fr;
      gap: 14px;
      margin-top: 12px;
    }
    @media(min-width: 820px){
      .projectGrid{ grid-template-columns: 1fr 1fr; }
    }
    .proj{
      text-decoration:none;
      color: var(--text);
      display:flex;
      gap: 14px;
      align-items:flex-start;
      padding: 16px;
      border-radius: var(--radius2);
      border: 1px solid rgba(56,189,248,0.18);
      background: linear-gradient(135deg, rgba(255,255,255,0.75), rgba(56,189,248,0.08));
      position:relative;
      overflow:hidden;
      transform: translateZ(0);
      transition: 220ms ease;
      box-shadow: var(--shadow2);
    }
    body.dark-mode .proj{
      background: linear-gradient(135deg, rgba(12,20,34,0.70), rgba(56,189,248,0.08));
    }
    .proj:active{ transform: scale(0.99); }
    .proj::before{
      content:"";
      position:absolute; inset:-1px;
      background: radial-gradient(circle at var(--mx) var(--my), rgba(0,242,234,0.18), transparent 45%);
      opacity: 0;
      transition: opacity 250ms ease;
      pointer-events:none;
    }
    .proj.isRippling::before{ opacity:1; }
    .pIcon{
      width: 46px; height:46px;
      border-radius: 14px;
      display:grid;
      place-items:center;
      color: var(--neon);
      background: rgba(56,189,248,0.12);
      border: 1px solid rgba(56,189,248,0.22);
      box-shadow: var(--glow);
      flex-shrink:0;
      position:relative;
      overflow:hidden;
    }
    .pIcon::after{
      content:"";
      position:absolute; inset:-60%;
      background: conic-gradient(from 90deg, rgba(0,242,234,0), rgba(0,242,234,0.25), rgba(168,85,247,0.18), rgba(0,242,234,0));
      animation: spin calc(8s / var(--speed)) linear infinite;
      opacity: 0.5;
    }
    .pIcon svg{ width: 22px; height:22px; position:relative; z-index:2; }

    .tag{
      display:inline-flex;
      align-items:center;
      gap: 6px;
      font-weight: 1000;
      font-size: 11px;
      padding: 5px 10px;
      border-radius: 999px;
      background: linear-gradient(90deg, var(--accent), var(--neon));
      color: #fff;
      box-shadow: var(--glow);
    }
    body.dark-mode .tag{ color:#050a10; }

    .proj h3{
      font-size: 16px;
      font-weight: 1000;
      margin-top: 8px;
      letter-spacing: -0.2px;
    }
    .proj span{
      display:block;
      margin-top: 6px;
      color: var(--muted);
      font-weight: 850;
      font-size: 13px;
      line-height: 1.45;
    }

    /* Buttons */
    .btnRow{
      display:flex;
      flex-wrap:wrap;
      gap: 12px;
      margin-top: 14px;
    }
    .btn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap: 10px;
      padding: 12px 18px;
      border-radius: 16px;
      text-decoration:none;
      font-weight: 1000;
      border: 1px solid rgba(56,189,248,0.22);
      position:relative;
      overflow:hidden;
      transform: translateZ(0);
      transition: 220ms ease;
      min-width: 140px;
      user-select:none;
    }
    .btn:active{ transform: scale(0.985); }
    .btnPrimary{
      background: linear-gradient(135deg, var(--accent), var(--neon));
      color: #fff;
      box-shadow: 0 10px 24px rgba(56,189,248,0.25);
    }
    body.dark-mode .btnPrimary{ color:#050a10; }
    .btnOutline{
      background: rgba(255,255,255,0.56);
      color: var(--text);
    }
    body.dark-mode .btnOutline{ background: rgba(255,255,255,0.06); }
    .btn::after{
      content:"";
      position:absolute; inset:0;
      background: radial-gradient(circle at var(--mx) var(--my), rgba(255,255,255,0.35), transparent 42%);
      opacity:0;
      transition: opacity 260ms ease;
      pointer-events:none;
    }
    .btn.isRippling::after{ opacity:1; }

    /* School section accent */
    #school .card{
      border-color: rgba(168,85,247,0.35);
      background: linear-gradient(180deg, var(--card), rgba(168,85,247,0.06));
    }

    footer{
      margin-top: 44px;
      padding-top: 22px;
      text-align:center;
      color: var(--muted);
      font-weight: 850;
      font-size: 13px;
      border-top: 1px solid rgba(56,189,248,0.10);
    }

    /* ====== REVEAL ANIMATIONS (MOBILE SAFE) ====== */
    .reveal{
      opacity: 0;
      transform: translateY(18px) scale(0.985);
      filter: blur(6px);
      transition: transform calc(720ms / var(--speed)) cubic-bezier(0.2,0.8,0.2,1),
                  opacity calc(720ms / var(--speed)) ease,
                  filter calc(720ms / var(--speed)) ease;
      will-change: transform, opacity, filter;
    }
    .reveal.show{
      opacity: 1;
      transform: translateY(0) scale(1);
      filter: blur(0);
    }

    /* ====== PERFORMANCE PANEL ====== */
    .perfDock{
      position: fixed;
      right: calc(12px + var(--sar));
      bottom: calc(12px + var(--sab));
      z-index: 300;
      display:flex;
      flex-direction:column;
      gap: 10px;
      pointer-events: none;
    }
    .perfDock .fab{
      pointer-events:auto;
      width: 52px; height: 52px;
      border-radius: 20px;
      border: 1px solid rgba(56,189,248,0.25);
      background: rgba(255,255,255,0.65);
      backdrop-filter: blur(14px);
      display:grid;
      place-items:center;
      box-shadow: var(--shadow2);
      cursor:pointer;
      transition: 220ms ease;
      position:relative;
      overflow:hidden;
      transform: translateZ(0);
    }
    body.dark-mode .perfDock .fab{ background: rgba(12,20,34,0.55); }
    .perfDock .fab:active{ transform: scale(0.98); }
    .perfDock .fab svg{ width: 22px; height: 22px; color: var(--neon); filter: drop-shadow(0 0 8px rgba(0,242,234,0.25)); }

    .perfPanel{
      pointer-events:auto;
      width: min(86vw, 320px);
      border-radius: 22px;
      border: 1px solid rgba(56,189,248,0.22);
      background: rgba(255,255,255,0.70);
      backdrop-filter: blur(16px);
      box-shadow: var(--shadow);
      padding: 14px;
      transform: translateY(10px);
      opacity: 0;
      pointer-events:none;
      transition: 250ms ease;
    }
    body.dark-mode .perfPanel{ background: rgba(12,20,34,0.68); }
    .perfPanel.show{ opacity: 1; transform: translateY(0); pointer-events:auto; }

    .perfPanel h4{
      font-size: 13px;
      font-weight: 1000;
      letter-spacing: 0.4px;
      margin-bottom: 10px;
      color: var(--text);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
    }
    .perfPanel p{
      font-size: 12px;
      color: var(--muted);
      font-weight: 850;
      line-height: 1.45;
      margin-bottom: 10px;
    }
    .seg{
      display:flex;
      gap: 8px;
    }
    .seg button{
      flex:1;
      border-radius: 14px;
      border: 1px solid rgba(56,189,248,0.20);
      background: rgba(56,189,248,0.08);
      padding: 10px 10px;
      font-weight: 1000;
      font-size: 12px;
      color: var(--text);
      cursor:pointer;
      transition: 200ms ease;
    }
    .seg button.on{
      background: linear-gradient(135deg, var(--accent), var(--neon));
      color:#fff;
      border-color: rgba(0,242,234,0.35);
      box-shadow: var(--glow);
    }
    body.dark-mode .seg button.on{ color:#050a10; }
    .seg button:active{ transform: scale(0.99); }

    .miniRow{
      display:flex;
      gap: 8px;
      margin-top: 10px;
      flex-wrap:wrap;
    }
    .miniRow button{
      flex: 1;
      min-width: 120px;
      border-radius: 14px;
      border: 1px solid rgba(56,189,248,0.20);
      background: rgba(255,255,255,0.45);
      padding: 10px 10px;
      font-weight: 1000;
      font-size: 12px;
      color: var(--text);
      cursor:pointer;
      transition: 200ms ease;
    }
    body.dark-mode .miniRow button{ background: rgba(255,255,255,0.06); }
    .miniRow button:active{ transform: scale(0.99); }

    /* iOS motion permission button */
    .motionAsk{
      display:none;
      margin-top: 10px;
      padding: 10px 12px;
      border-radius: 14px;
      border: 1px dashed rgba(56,189,248,0.35);
      background: rgba(56,189,248,0.06);
      color: var(--text);
      font-weight: 1000;
      font-size: 12px;
      cursor:pointer;
    }
    .motionAsk.show{ display:block; }
  </style>
</head>

<body>
  <div class="scrollProg" aria-hidden="true"><i></i></div>

  <!-- Multi-layer FX background -->
  <div class="fxStack" aria-hidden="true">
    <canvas id="fxMatrix" class="fx"></canvas>
    <canvas id="fxParticles" class="fx"></canvas>
    <canvas id="fxGlow" class="fx"></canvas>
  </div>
  <div class="gridOverlay" aria-hidden="true"></div>
  <div class="grain" aria-hidden="true"></div>

  <header>
    <div class="nav">
      <div class="brand" aria-label="Brand">
        <div class="mark"><b>HB</b></div>
        <span>H·ªìng Gia B·∫£o</span>
      </div>

      <div class="ctrlRow">
        <nav aria-label="Navigation">
          <ul>
            <li><a href="#home" class="navLink">Home</a></li>
            <li><a href="#about" class="navLink">About</a></li>
            <li><a href="#skills" class="navLink">Skills</a></li>
            <li><a href="#projects" class="navLink">Projects</a></li>
            <li><a href="#contact" class="navLink">Contact</a></li>
            <li><a href="#school" class="navLink">School</a></li>
          </ul>
        </nav>

        <button id="themeToggle" class="pillBtn rippleHost" aria-label="ƒê·ªïi ch·∫ø ƒë·ªô">
          <svg id="moonIcon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
          </svg>
          <svg id="sunIcon" style="display:none" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="5"></circle>
            <line x1="12" y1="1" x2="12" y2="3"></line>
            <line x1="12" y1="21" x2="12" y2="23"></line>
            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
            <line x1="1" y1="12" x2="3" y2="12"></line>
            <line x1="21" y1="12" x2="23" y2="12"></line>
            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
          </svg>
          <span>Theme</span>
        </button>

        <button id="burger" class="pillBtn burger rippleHost" aria-label="M·ªü menu">
          <i></i>
        </button>
      </div>
    </div>
  </header>

  <!-- Mobile drawer -->
  <div id="drawerMask" class="drawerMask" aria-hidden="true"></div>
  <aside id="drawer" class="drawer" aria-label="Menu ƒëi·ªán tho·∫°i">
    <div class="drawerHead">
      <b>MENU</b>
      <button id="drawerClose" class="pillBtn rippleHost" style="height:36px;padding:0 12px" aria-label="ƒê√≥ng menu">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6 6 18M6 6l12 12"/></svg>
        ƒê√≥ng
      </button>
    </div>

    <a href="#home" class="drawerLink">Home <small>Trang ƒë·∫ßu</small></a>
    <a href="#about" class="drawerLink">About <small>Gi·ªõi thi·ªáu</small></a>
    <a href="#skills" class="drawerLink">Skills <small>K·ªπ nƒÉng</small></a>
    <a href="#projects" class="drawerLink">Projects <small>D·ª± √°n</small></a>
    <a href="#contact" class="drawerLink">Contact <small>Li√™n h·ªá</small></a>
    <a href="#school" class="drawerLink">School <small>H·ªçc t·∫≠p</small></a>
  </aside>

  <main>
    <!-- HERO -->
    <section class="hero reveal" id="home">
      <div class="avatarStage" id="tiltStage">
        <div class="orbital"></div>

        <div class="water" aria-hidden="true">
          <div class="surface"></div>
          <div class="rip r1"></div>
          <div class="rip r2"></div>
          <div class="rip r3"></div>
        </div>

        <div class="avatarWrap" id="avatarWrap" role="img" aria-label="·∫¢nh ƒë·∫°i di·ªán H·ªìng Gia B·∫£o">
          <img src="avatar.jpg" alt="H·ªìng Gia B·∫£o" />
          <div class="scanLine" aria-hidden="true"></div>
        </div>
      </div>

      <div class="heroTopMeta">
        <span class="metaTag">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2 3 6v6c0 5 3.5 9.74 9 11 5.5-1.26 9-6 9-11V6l-9-4Z"/><path d="M9 12l2 2 4-4"/></svg>
          Cyber Security
        </span>
        <span class="metaTag">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 7h16M4 12h16M4 17h16"/></svg>
          Mobile-First FX
        </span>
        <span class="metaTag">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2v6m0 8v6M4.93 4.93l4.24 4.24m5.66 5.66 4.24 4.24M2 12h6m8 0h6M4.93 19.07l4.24-4.24m5.66-5.66 4.24-4.24"/></svg>
          Neon System
        </span>
      </div>

      <h1 class="name">
        <span class="glitch" id="glitchName" data-text="H·ªìng Gia B·∫£o">H·ªìng Gia B·∫£o</span>
      </h1>

      <div class="subtitle" aria-label="Typewriter">
        <span>&gt;</span>
        <span id="typeText"></span>
        <span class="cursor" aria-hidden="true"></span>
      </div>

      <div class="chips">
        <a href="#projects" class="chip" data-ripple>
          <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
          </svg>
          <span>My Projects</span>
        </a>

        <a href="#contact" class="chip" data-ripple>
          <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
          </svg>
          <span>Contact Me</span>
        </a>
      </div>
    </section>

    <!-- ABOUT -->
    <section class="section reveal" id="about">
      <div class="card" data-tilt data-ripple>
        <div class="head">
          <div class="iconBox" aria-hidden="true">
            <svg class="headIcon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>
          </div>
          <h2>Gi·ªõi thi·ªáu</h2>
        </div>
        <p>
          M√¨nh l√† <b>H·ªìng Gia B·∫£o</b>. M√¨nh th√≠ch <b>ƒë·ªì c√¥ng ngh·ªá</b>, th√≠ch t√¨m hi·ªÉu c·∫•u t·∫°o ‚Äì c√°ch ho·∫°t ƒë·ªông c·ªßa <b>ƒë·ªì c√¥ng ngh·ªá</b>,
          v√† m√¨nh c≈©ng th√≠ch quay/ch·ª•p ƒë·ªÉ l∆∞u l·∫°i kho·∫£nh kh·∫Øc v√† h√†nh tr√¨nh.
          Hi·ªán t·∫°i m√¨nh ƒëang l√† <b>T√¢n sinh vi√™n</b> ng√†nh An ninh m·∫°ng t·∫°i iSPACE v√† l√†m c·ªông t√°c vi√™n tuy·ªÉn sinh cho tr∆∞·ªùng.
        </p>
      </div>
    </section>

    <!-- SKILLS -->
    <section class="section reveal" id="skills">
      <div class="grid2">
        <div class="card" data-tilt data-ripple>
          <div class="head">
            <div class="iconBox" aria-hidden="true">
              <svg class="headIcon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6L6 18M6 6l12 12"/></svg>
            </div>
            <h2>K·ªπ nƒÉng c·ª©ng</h2>
          </div>
          <ul class="skillList">
            <li>
              <svg class="skillIcon" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01" /></svg>
              <div><b>Tin h·ªçc c∆° b·∫£n:</b> Bi·∫øt s·ª≠ d·ª•ng m√°y t√≠nh, ƒëang t√¨m hi·ªÉu v·ªÅ ph·∫ßn c·ª©ng.</div>
            </li>
            <li>
              <svg class="skillIcon" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" /></svg>
              <div><b>An ninh m·∫°ng:</b> ƒêang h·ªçc c√°c ki·∫øn th·ª©c nh·∫≠p m√¥n.</div>
            </li>
            <li>
              <svg class="skillIcon" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4" /></svg>
              <div><b>Python:</b> ƒêang t√¨m hi·ªÉu v√† h·ªçc h·ªèi th√™m.</div>
            </li>
          </ul>
        </div>

        <div class="card" data-tilt data-ripple>
          <div class="head">
            <div class="iconBox" aria-hidden="true">
              <svg class="headIcon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><path d="M7 8l5-5 5 5"/><path d="M12 3v12"/></svg>
            </div>
            <h2>K·ªπ nƒÉng m·ªÅm</h2>
          </div>
          <ul class="skillList">
            <li>
              <svg class="skillIcon" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z" /></svg>
              <div><b>Edit Video:</b> Ch·ªânh s·ª≠a video TikTok/Trend b·∫±ng <b>CapCut</b>.</div>
            </li>
            <li>
              <svg class="skillIcon" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01" /></svg>
              <div><b>S√°ng t·∫°o:</b> Th√≠ch quay ch·ª•p, b·∫Øt trend nhanh.</div>
            </li>
            <li>
              <svg class="skillIcon" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a1.994 1.994 0 01-1.414-.586m0 0L11 14h4a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2v4l.586-.586z" /></svg>
              <div><b>Giao ti·∫øp:</b> T∆∞ v·∫•n tuy·ªÉn sinh, l√†m vi·ªác nh√≥m.</div>
            </li>
          </ul>
        </div>
      </div>
    </section>

    <!-- PROJECTS -->
    <section class="section reveal" id="projects">
      <div class="card" data-tilt data-ripple>
        <div class="head">
          <div class="iconBox" aria-hidden="true">
            <svg class="headIcon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/></svg>
          </div>
          <h2>D·ª± √°n c√° nh√¢n</h2>
        </div>

        <div class="projectGrid">
          <a class="proj" href="https://honggiabao2911.github.io/qua-tang-20.10/" target="_blank" rel="noopener" data-ripple>
            <div class="pIcon" aria-hidden="true">
              <svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"/></svg>
            </div>
            <div>
              <span class="tag">üéÅ Qu√† t·∫∑ng</span>
              <h3>Project 20.10</h3>
              <span>Web qu√† t·∫∑ng online v·ªõi hi·ªáu ·ª©ng d·ªÖ th∆∞∆°ng, t·ªëi ∆∞u ƒëi·ªán tho·∫°i.</span>
            </div>
          </a>

          <a class="proj" href="https://honggiabao2911.github.io/thieptrungthu/" target="_blank" rel="noopener" data-ripple>
            <div class="pIcon" aria-hidden="true">
              <svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"/></svg>
            </div>
            <div>
              <span class="tag">üåô S·ª± ki·ªán</span>
              <h3>Thi·ªáp Trung Thu</h3>
              <span>Thi·ªáp ƒëi·ªán t·ª≠ giao di·ªán s·∫°ch, m∆∞·ª£t, t·ªëi ∆∞u mobile.</span>
            </div>
          </a>
        </div>
      </div>
    </section>

    <!-- CONTACT -->
    <section class="section reveal" id="contact">
      <div class="card" data-tilt data-ripple>
        <div class="head">
          <div class="iconBox" aria-hidden="true">
            <svg class="headIcon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><path d="m22 6-10 7L2 6"/></svg>
          </div>
          <h2>Li√™n h·ªá c√° nh√¢n</h2>
        </div>
        <p>K·∫øt n·ªëi tr·ª±c ti·∫øp v·ªõi m√¨nh:</p>
        <div class="btnRow">
          <a href="https://www.facebook.com/share/17YPJnPHDH/" target="_blank" rel="noopener" class="btn btnPrimary" data-ripple>Facebook</a>
          <a href="https://zalo.me/0815882673" target="_blank" rel="noopener" class="btn btnPrimary" data-ripple>Zalo Chat</a>
          <a href="https://vm.tiktok.com/ZSHwtGHx442dK-eOVQW/" target="_blank" rel="noopener" class="btn btnPrimary" data-ripple>TikTok</a>
        </div>
      </div>
    </section>

    <!-- SCHOOL -->
    <section class="section reveal" id="school">
      <div class="card" data-tilt data-ripple>
        <div class="head">
          <div class="iconBox" aria-hidden="true">
            <svg class="headIcon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 14l9-5-9-5-9 5 9 5z"/><path d="M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"/></svg>
          </div>
          <h2>ƒê∆°n v·ªã c√¥ng t√°c & H·ªçc t·∫≠p</h2>
        </div>
        <p>Hi·ªán t·∫°i m√¨nh ƒëang theo h·ªçc ng√†nh <b>An ninh m·∫°ng</b> v√† l√†m vi·ªác t·∫°i:</p>
        <div class="btnRow">
          <a href="https://ispace.edu.vn/" target="_blank" rel="noopener" class="btn btnOutline" data-ripple>üè´ Website iSPACE</a>
          <a href="https://www.google.com/maps/search/?api=1&query=Tr%C6%B0%E1%BB%9Dng%20Cao%20%C4%91%E1%BA%A3ng%20An%20ninh%20m%E1%BA%A1ng%20iSPACE" target="_blank" rel="noopener" class="btn btnOutline" data-ripple>üß≠ Ch·ªâ ƒë∆∞·ªùng</a>
        </div>
      </div>
    </section>

    <footer class="reveal">
      <p>¬© <span id="year"></span> H·ªìng Gia B·∫£o. All systems operational.</p>
    </footer>
  </main>

  <!-- Performance / FX Dock -->
  <div class="perfDock" aria-label="B·∫£ng hi·ªáu nƒÉng">
    <button class="fab" id="perfBtn" aria-label="M·ªü b·∫£ng hi·ªáu nƒÉng">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2v2"/><path d="M12 20v2"/><path d="M4.93 4.93l1.41 1.41"/><path d="M17.66 17.66l1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="M4.93 19.07l1.41-1.41"/><path d="M17.66 6.34l1.41-1.41"/><path d="M12 6a6 6 0 1 0 6 6"/></svg>
    </button>

    <div class="perfPanel" id="perfPanel">
      <h4>
        Hi·ªáu ·ª©ng / Hi·ªáu nƒÉng
        <button id="perfClose" class="pillBtn rippleHost" style="height:34px;padding:0 10px" aria-label="ƒê√≥ng b·∫£ng">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6 6 18M6 6l12 12"/></svg>
        </button>
      </h4>
      <p>Ch·ªçn m·ª©c hi·ªáu ·ª©ng ƒë·ªÉ ch·∫°y m∆∞·ª£t tr√™n ƒëi·ªán tho·∫°i (pin y·∫øu th√¨ ch·ªçn TH·∫§P).</p>

      <div class="seg" role="group" aria-label="M·ª©c hi·ªáu ·ª©ng">
        <button data-tier="low">TH·∫§P</button>
        <button data-tier="mid">V·ª™A</button>
        <button data-tier="ultra">SI√äU</button>
      </div>

      <button id="motionAsk" class="motionAsk">B·∫≠t ‚ÄúNghi√™ng m√°y‚Äù (Motion Permission)</button>

      <div class="miniRow">
        <button id="fxToggle">T·∫Øt/B·∫≠t FX</button>
        <button id="resetTilt">Reset Tilt</button>
      </div>
    </div>
  </div>

  <script>
    /* ===========================================================
       CYBER ENGINE ‚Äî Touch-first, mobile optimized
       =========================================================== */

    // ---------- Utilities ----------
    const $ = (q, el=document) => el.querySelector(q);
    const $$ = (q, el=document) => [...el.querySelectorAll(q)];
    const clamp = (v, a, b) => Math.max(a, Math.min(b, v));
    const lerp = (a, b, t) => a + (b - a) * t;
    const now = () => performance.now();

    const prefersReduced = matchMedia('(prefers-reduced-motion: reduce)').matches;

    // ---------- Year ----------
    $('#year').textContent = new Date().getFullYear();

    // ---------- Theme ----------
    const body = document.body;
    const themeToggle = $('#themeToggle');
    const sunIcon = $('#sunIcon');
    const moonIcon = $('#moonIcon');

    function applyTheme(mode){
      if (mode === 'dark') body.classList.add('dark-mode');
      else body.classList.remove('dark-mode');

      const isDark = body.classList.contains('dark-mode');
      sunIcon.style.display = isDark ? 'block' : 'none';
      moonIcon.style.display = isDark ? 'none' : 'block';
      localStorage.setItem('theme', isDark ? 'dark' : 'light');
    }
    applyTheme(localStorage.getItem('theme') || (matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light'));

    themeToggle.addEventListener('click', () => applyTheme(body.classList.contains('dark-mode') ? 'light' : 'dark'));

    // ---------- Drawer (mobile menu) ----------
    const drawer = $('#drawer');
    const drawerMask = $('#drawerMask');
    const burger = $('#burger');
    const drawerClose = $('#drawerClose');

    const openDrawer = () => {
      drawer.classList.add('show');
      drawerMask.classList.add('show');
      drawerMask.setAttribute('aria-hidden','false');
    };
    const closeDrawer = () => {
      drawer.classList.remove('show');
      drawerMask.classList.remove('show');
      drawerMask.setAttribute('aria-hidden','true');
    };

    burger.addEventListener('click', openDrawer);
    drawerClose.addEventListener('click', closeDrawer);
    drawerMask.addEventListener('click', closeDrawer);
    $$('.drawerLink').forEach(a => a.addEventListener('click', closeDrawer));

    // ---------- Nav active based on scroll ----------
    const navLinks = $$('.navLink');
    const sections = ['home','about','skills','projects','contact','school'].map(id => document.getElementById(id)).filter(Boolean);

    function updateActiveNav(){
      const y = window.scrollY + 140;
      let cur = sections[0]?.id || 'home';
      for (const s of sections){
        if (s.offsetTop <= y) cur = s.id;
      }
      navLinks.forEach(a => a.classList.toggle('active', a.getAttribute('href') === '#' + cur));
    }
    window.addEventListener('scroll', updateActiveNav, {passive:true});
    updateActiveNav();

    // ---------- Scroll progress ----------
    const progBar = $('.scrollProg i');
    function updateProg(){
      const max = document.documentElement.scrollHeight - innerHeight;
      const p = max <= 0 ? 0 : clamp(scrollY / max, 0, 1);
      progBar.style.width = (p * 100).toFixed(2) + '%';
    }
    window.addEventListener('scroll', updateProg, {passive:true});
    updateProg();

    // ---------- Ripple (touch + pointer) ----------
    function attachRipple(el){
      const setPos = (e) => {
        const r = el.getBoundingClientRect();
        const x = (('touches' in e) ? e.touches[0].clientX : e.clientX) - r.left;
        const y = (('touches' in e) ? e.touches[0].clientY : e.clientY) - r.top;
        el.style.setProperty('--mx', (x / r.width * 100) + '%');
        el.style.setProperty('--my', (y / r.height * 100) + '%');
      };

      el.addEventListener('pointerdown', (e) => {
        setPos(e);
        el.classList.add('isRippling');
        setTimeout(()=> el.classList.remove('isRippling'), 260);
      }, {passive:true});

      el.addEventListener('touchstart', (e) => {
        setPos(e);
        el.classList.add('isRippling');
        setTimeout(()=> el.classList.remove('isRippling'), 260);
      }, {passive:true});
    }
    $$('[data-ripple]').forEach(attachRipple);
    $$('.rippleHost').forEach(attachRipple);

    // ---------- Typewriter ----------
    const typeEl = $('#typeText');
    const phrases = [
      "Cyber Security Student üõ°Ô∏è",
      "Tech Enthusiast üíª",
      "Video Editor (CapCut) üé¨",
      "iSPACE Collaborator üè´",
      "Mobile-First UI / UX ‚ö°",
      "Cyber Visual Effects Engine üß†"
    ];
    let pi = 0, ci = 0, deleting = false, wait = 0;

    function tickType(){
      if (prefersReduced) { typeEl.textContent = phrases[0]; return; }

      const p = phrases[pi];
      if (wait > 0){ wait -= 1; requestAnimationFrame(tickType); return; }

      if (!deleting){
        ci++;
        typeEl.textContent = p.slice(0, ci);
        if (ci >= p.length){ deleting = true; wait = 80; }
      } else {
        ci--;
        typeEl.textContent = p.slice(0, ci);
        if (ci <= 0){ deleting = false; pi = (pi+1)%phrases.length; wait = 20; }
      }
      // speed control
      const delay = deleting ? 24 : 42;
      setTimeout(()=> requestAnimationFrame(tickType), delay);
    }
    tickType();

    // ---------- Glitch pulse on name ----------
    const glitchName = $('#glitchName');
    if (!prefersReduced){
      setInterval(() => {
        glitchName.classList.add('pulse');
        setTimeout(()=> glitchName.classList.remove('pulse'), 140);
      }, 1600);
    }

    // ---------- Reveal on scroll ----------
    const reveals = $$('.reveal');
    const io = new IntersectionObserver((entries) => {
      for (const en of entries){
        if (en.isIntersecting) en.target.classList.add('show');
      }
    }, {threshold: 0.12});
    reveals.forEach(el => io.observe(el));

    // ---------- Tilt system (touch drag + device orientation) ----------
    const tiltStage = $('#tiltStage');
    const avatarWrap = $('#avatarWrap');
    const tiltCards = $$('[data-tilt]');

    const tiltState = {
      rx: 0, ry: 0,
      tx: 0, ty: 0,
      enabled: true,
      mode: 'pointer', // pointer | gyro
      gyroOK: false,
      dragging: false,
      lastX: 0,
      lastY: 0,
    };

    function setTiltVars(rx, ry, mx=50, my=50){
      // Global vars for all tilt elements
      document.documentElement.style.setProperty('--rx', rx.toFixed(3) + 'deg');
      document.documentElement.style.setProperty('--ry', ry.toFixed(3) + 'deg');
      document.documentElement.style.setProperty('--mx', mx.toFixed(2) + '%');
      document.documentElement.style.setProperty('--my', my.toFixed(2) + '%');
    }

    function applyTilt(){
      // Smooth spring-ish
      tiltState.rx = lerp(tiltState.rx, tiltState.tx, 0.10);
      tiltState.ry = lerp(tiltState.ry, tiltState.ty, 0.10);

      setTiltVars(tiltState.rx, tiltState.ry);

      // Apply class to cards for transform (keeps GPU stable)
      const on = tiltState.enabled && !prefersReduced;
      tiltCards.forEach(c => c.classList.toggle('touchTilt', on));
      requestAnimationFrame(applyTilt);
    }
    applyTilt();

    // Touch drag tilt (works everywhere)
    function pointerToTilt(e){
      const x = e.clientX ?? (e.touches?.[0]?.clientX);
      const y = e.clientY ?? (e.touches?.[0]?.clientY);
      if (x == null || y == null) return;

      const w = innerWidth, h = innerHeight;
      const nx = (x / w) * 2 - 1;
      const ny = (y / h) * 2 - 1;

      const maxT = 12; // deg
      tiltState.ty = clamp(nx * maxT, -maxT, maxT);
      tiltState.tx = clamp(-ny * maxT, -maxT, maxT);

      document.documentElement.style.setProperty('--mx', (x / w * 100) + '%');
      document.documentElement.style.setProperty('--my', (y / h * 100) + '%');
    }

    window.addEventListener('pointermove', (e) => {
      if (!tiltState.enabled || prefersReduced) return;
      if (tiltState.mode !== 'pointer') return;
      pointerToTilt(e);
    }, {passive:true});

    // Drag to ‚Äúlock‚Äù stronger tilt on touch
    window.addEventListener('pointerdown', (e) => {
      if (!tiltState.enabled || prefersReduced) return;
      tiltState.dragging = true;
      tiltState.lastX = e.clientX;
      tiltState.lastY = e.clientY;
      pointerToTilt(e);
    }, {passive:true});

    window.addEventListener('pointerup', () => {
      tiltState.dragging = false;
    }, {passive:true});

    // Gyro tilt (mobile)
    let motionPermissionAsked = false;
    const motionAskBtn = $('#motionAsk');

    function handleDeviceOrientation(ev){
      // gamma: left-right, beta: front-back
      const g = ev.gamma; // [-90..90]
      const b = ev.beta;  // [-180..180]
      if (g == null || b == null) return;

      tiltState.mode = 'gyro';
      tiltState.gyroOK = true;

      // Map to degrees
      const maxT = 12;
      tiltState.ty = clamp(g / 6, -maxT, maxT);
      tiltState.tx = clamp(-b / 12, -maxT, maxT);
    }

    function showMotionAskIfNeeded(){
      const isiOS = /iP(hone|ad|od)/.test(navigator.userAgent);
      const needsPermission = typeof DeviceOrientationEvent !== 'undefined' &&
        typeof DeviceOrientationEvent.requestPermission === 'function';

      if (isiOS && needsPermission && !motionPermissionAsked){
        motionAskBtn.classList.add('show');
      }
    }

    async function requestMotionPermission(){
      try{
        motionPermissionAsked = true;
        const res = await DeviceOrientationEvent.requestPermission();
        if (res === 'granted'){
          window.addEventListener('deviceorientation', handleDeviceOrientation, true);
          motionAskBtn.classList.remove('show');
        }
      }catch(err){
        // If fails, just keep pointer mode
        motionAskBtn.textContent = "Thi·∫øt b·ªã kh√¥ng h·ªó tr·ª£ Motion Permission";
        setTimeout(()=> motionAskBtn.classList.remove('show'), 1500);
      }
    }

    motionAskBtn.addEventListener('click', requestMotionPermission);

    // If Android / no permission needed:
    if (typeof DeviceOrientationEvent !== 'undefined' && typeof DeviceOrientationEvent.requestPermission !== 'function'){
      window.addEventListener('deviceorientation', handleDeviceOrientation, true);
    } else {
      showMotionAskIfNeeded();
    }

    // Reset tilt
    $('#resetTilt').addEventListener('click', () => {
      tiltState.tx = tiltState.ty = 0;
      tiltState.mode = tiltState.gyroOK ? 'gyro' : 'pointer';
      setTiltVars(0,0,50,50);
    });

    // ---------- Performance Panel ----------
    const perfBtn = $('#perfBtn');
    const perfPanel = $('#perfPanel');
    const perfClose = $('#perfClose');
    const fxToggle = $('#fxToggle');
    const tierBtns = $$('.seg button');

    const FX = {
      enabled: true,
      tier: 'mid', // low | mid | ultra
    };

    function applyTier(tier){
      FX.tier = tier;
      tierBtns.forEach(b => b.classList.toggle('on', b.dataset.tier === tier));
      localStorage.setItem('fxTier', tier);
      engine.setTier(tier);
    }

    perfBtn.addEventListener('click', () => perfPanel.classList.toggle('show'));
    perfClose.addEventListener('click', () => perfPanel.classList.remove('show'));

    tierBtns.forEach(b => b.addEventListener('click', () => applyTier(b.dataset.tier)));

    fxToggle.addEventListener('click', () => {
      FX.enabled = !FX.enabled;
      document.querySelector('.fxStack').style.display = FX.enabled ? 'block' : 'none';
      document.querySelector('.gridOverlay').style.display = FX.enabled ? 'block' : 'none';
      document.querySelector('.grain').style.display = FX.enabled ? 'block' : 'none';
      localStorage.setItem('fxEnabled', FX.enabled ? '1' : '0');
    });

    // Auto choose tier on mobile / save-data
    const saveData = navigator.connection?.saveData;
    const isMobile = matchMedia('(max-width: 860px)').matches;
    const savedTier = localStorage.getItem('fxTier');
    const savedFx = localStorage.getItem('fxEnabled');

    if (savedFx === '0'){
      FX.enabled = false;
      document.querySelector('.fxStack').style.display = 'none';
      document.querySelector('.gridOverlay').style.display = 'none';
      document.querySelector('.grain').style.display = 'none';
    }

    applyTier(savedTier || (saveData ? 'low' : (isMobile ? 'mid' : 'ultra')));

    // ---------- Canvas Engine (Matrix + Particles + Glow) ----------
    const cMatrix = $('#fxMatrix');
    const cPart = $('#fxParticles');
    const cGlow = $('#fxGlow');
    const ctxM = cMatrix.getContext('2d', {alpha:true});
    const ctxP = cPart.getContext('2d', {alpha:true});
    const ctxG = cGlow.getContext('2d', {alpha:true});

    // DPI scaling
    function resizeCanvas(c){
      const dpr = Math.min(devicePixelRatio || 1, 2); // cap for mobile performance
      c.width = Math.floor(innerWidth * dpr);
      c.height = Math.floor(innerHeight * dpr);
      c.style.width = innerWidth + 'px';
      c.style.height = innerHeight + 'px';
      return dpr;
    }

    // Engine state
    const engine = {
      dpr: 1,
      t0: now(),
      last: now(),
      dt: 16,
      tier: 'mid',
      matrix: {
        fontSize: 14,
        drops: [],
        chars: "01HGBAO_CYBER_SEC<>[]{}/*+-_=#",
        speed: 1,
      },
      particles: {
        count: 140,
        max: 240,
        pts: [],
        linkDist: 140,
        drift: 0.25,
      },
      glow: {
        pulses: [],
      },
      pointer: {x: innerWidth*0.5, y: innerHeight*0.4, down:false, vx:0, vy:0},
      setTier(t){
        this.tier = t;

        // Matrix
        this.matrix.speed = (t === 'low') ? 0.7 : (t === 'mid' ? 1 : 1.35);
        this.matrix.fontSize = (t === 'low') ? 16 : (t === 'mid' ? 14 : 12);

        // Particles
        this.particles.count = (t === 'low') ? (isMobile ? 70 : 90)
                              : (t === 'mid') ? (isMobile ? 110 : 160)
                              : (isMobile ? 150 : 220);
        this.particles.linkDist = (t === 'low') ? 120 : (t === 'mid' ? 150 : 180);
        this.particles.drift = (t === 'low') ? 0.18 : (t === 'mid' ? 0.26 : 0.34);

        // Re-init
        initMatrix();
        initParticles();
      }
    };

    // Pointer tracking for interactive FX
    function setPointerFromEvent(e){
      const x = e.clientX ?? (e.touches?.[0]?.clientX);
      const y = e.clientY ?? (e.touches?.[0]?.clientY);
      if (x == null || y == null) return;
      const px = x, py = y;

      engine.pointer.vx = px - engine.pointer.x;
      engine.pointer.vy = py - engine.pointer.y;
      engine.pointer.x = px;
      engine.pointer.y = py;

      // Glow pulse on fast swipe / touch
      const speed = Math.hypot(engine.pointer.vx, engine.pointer.vy);
      if (speed > 18 && engine.tier !== 'low'){
        engine.glow.pulses.push({x:px, y:py, r: 0, a: 0.9});
        if (engine.glow.pulses.length > 18) engine.glow.pulses.shift();
      }
    }

    window.addEventListener('pointermove', (e)=> setPointerFromEvent(e), {passive:true});
    window.addEventListener('touchmove', (e)=> setPointerFromEvent(e), {passive:true});
    window.addEventListener('pointerdown', (e)=> { engine.pointer.down = true; setPointerFromEvent(e); }, {passive:true});
    window.addEventListener('pointerup', ()=> engine.pointer.down = false, {passive:true});

    // ===== Matrix init/draw =====
    function initMatrix(){
      const dpr = engine.dpr;
      const fs = engine.matrix.fontSize;
      const cols = Math.floor((cMatrix.width / dpr) / fs);
      engine.matrix.drops = new Array(cols).fill(1).map(()=> Math.random()*innerHeight/fs);
    }

    function drawMatrix(dt){
      const dpr = engine.dpr;
      const fs = engine.matrix.fontSize;
      const cols = engine.matrix.drops.length;
      const speed = engine.matrix.speed;

      // background fade
      const style = getComputedStyle(document.body);
      const isDark = body.classList.contains('dark-mode');

      ctxM.setTransform(dpr,0,0,dpr,0,0);
      ctxM.fillStyle = isDark ? "rgba(5,10,16,0.18)" : "rgba(240,249,255,0.22)";
      ctxM.fillRect(0,0,innerWidth,innerHeight);

      // draw chars
      ctxM.font = fs + "px ui-monospace, Menlo, monospace";
      ctxM.fillStyle = isDark ? "rgba(14,165,233,0.70)" : "rgba(2,132,199,0.55)";

      const chars = engine.matrix.chars;
      for (let i=0;i<cols;i++){
        const text = chars[(Math.random()*chars.length)|0];
        const x = i*fs;
        const y = engine.matrix.drops[i]*fs;

        // ‚Äúhead‚Äù brightness near pointer
        const dx = x - engine.pointer.x;
        const dy = y - engine.pointer.y;
        const near = Math.hypot(dx,dy) < 140 ? 1 : 0;

        if (near && engine.tier !== 'low'){
          ctxM.fillStyle = isDark ? "rgba(0,242,234,0.85)" : "rgba(2,132,199,0.75)";
          ctxM.fillText(text, x, y);
          ctxM.fillStyle = isDark ? "rgba(14,165,233,0.70)" : "rgba(2,132,199,0.55)";
        } else {
          ctxM.fillText(text, x, y);
        }

        // reset drop
        if (y > innerHeight && Math.random() > (engine.tier === 'ultra' ? 0.975 : 0.985)){
          engine.matrix.drops[i] = 0;
        }
        engine.matrix.drops[i] += (dt * 0.06) * speed;
      }
    }

    // ===== Particles init/draw =====
    function initParticles(){
      const n = engine.particles.count;
      engine.particles.pts = [];
      for (let i=0;i<n;i++){
        engine.particles.pts.push({
          x: Math.random()*innerWidth,
          y: Math.random()*innerHeight,
          vx: (Math.random()*2-1) * engine.particles.drift,
          vy: (Math.random()*2-1) * engine.particles.drift,
          r: (engine.tier==='ultra' ? 1.8 : (engine.tier==='mid' ? 1.6 : 1.4)) * (Math.random()*0.6+0.8),
        });
      }
    }

    function drawParticles(dt){
      ctxP.setTransform(engine.dpr,0,0,engine.dpr,0,0);
      ctxP.clearRect(0,0,innerWidth,innerHeight);

      const pts = engine.particles.pts;
      const linkDist = engine.particles.linkDist;
      const linkDist2 = linkDist * linkDist;
      const isDark = body.classList.contains('dark-mode');

      // Draw links
      ctxP.lineWidth = 1;
      for (let i=0;i<pts.length;i++){
        const a = pts[i];

        // move
        a.x += a.vx * dt * 0.05;
        a.y += a.vy * dt * 0.05;

        // gentle attraction to pointer
        const px = engine.pointer.x, py = engine.pointer.y;
        const ddx = px - a.x;
        const ddy = py - a.y;
        const d2 = ddx*ddx + ddy*ddy;
        if (d2 < 220*220 && engine.tier !== 'low'){
          const f = (1 - d2/(220*220)) * 0.6;
          a.x += ddx * f * 0.002;
          a.y += ddy * f * 0.002;
        }

        // wrap
        if (a.x < -50) a.x = innerWidth + 50;
        if (a.x > innerWidth + 50) a.x = -50;
        if (a.y < -50) a.y = innerHeight + 50;
        if (a.y > innerHeight + 50) a.y = -50;

        // links
        for (let j=i+1;j<pts.length;j++){
          const b = pts[j];
          const dx = a.x-b.x, dy = a.y-b.y;
          const dist2 = dx*dx + dy*dy;
          if (dist2 < linkDist2){
            const t = 1 - dist2/linkDist2;

            // color shift by theme
            const alpha = (engine.tier==='ultra' ? 0.24 : (engine.tier==='mid' ? 0.18 : 0.12)) * t;
            ctxP.strokeStyle = isDark ? `rgba(0,242,234,${alpha})` : `rgba(2,132,199,${alpha})`;
            ctxP.beginPath();
            ctxP.moveTo(a.x,a.y);
            ctxP.lineTo(b.x,b.y);
            ctxP.stroke();
          }
        }
      }

      // Draw particles
      for (const p of pts){
        const ddx = p.x - engine.pointer.x;
        const ddy = p.y - engine.pointer.y;
        const near = Math.hypot(ddx,ddy) < 120;

        ctxP.fillStyle = isDark
          ? (near ? "rgba(0,242,234,0.95)" : "rgba(56,189,248,0.70)")
          : (near ? "rgba(2,132,199,0.90)" : "rgba(2,132,199,0.55)");

        ctxP.beginPath();
        ctxP.arc(p.x, p.y, p.r + (near?0.8:0), 0, Math.PI*2);
        ctxP.fill();
      }
    }

    // ===== Glow / Aurora pulses =====
    function drawGlow(dt){
      ctxG.setTransform(engine.dpr,0,0,engine.dpr,0,0);
      ctxG.clearRect(0,0,innerWidth,innerHeight);

      const isDark = body.classList.contains('dark-mode');

      // soft aurora blobs (cheap)
      const t = (now() - engine.t0) * 0.0002 * (engine.tier==='ultra'?1.2:1);
      const cx1 = innerWidth * (0.18 + 0.06*Math.sin(t*1.3));
      const cy1 = innerHeight * (0.24 + 0.08*Math.cos(t*1.1));
      const cx2 = innerWidth * (0.82 + 0.06*Math.sin(t*1.0+1.4));
      const cy2 = innerHeight * (0.32 + 0.08*Math.cos(t*1.2+0.7));

      const g1 = ctxG.createRadialGradient(cx1, cy1, 20, cx1, cy1, innerWidth*0.55);
      g1.addColorStop(0, isDark ? "rgba(0,242,234,0.12)" : "rgba(2,132,199,0.10)");
      g1.addColorStop(1, "rgba(0,0,0,0)");
      ctxG.fillStyle = g1;
      ctxG.fillRect(0,0,innerWidth,innerHeight);

      const g2 = ctxG.createRadialGradient(cx2, cy2, 20, cx2, cy2, innerWidth*0.55);
      g2.addColorStop(0, isDark ? "rgba(168,85,247,0.10)" : "rgba(124,58,237,0.10)");
      g2.addColorStop(1, "rgba(0,0,0,0)");
      ctxG.fillStyle = g2;
      ctxG.fillRect(0,0,innerWidth,innerHeight);

      // pulses
      for (const p of engine.glow.pulses){
        p.r += dt * 0.10 * (engine.tier==='ultra' ? 1.2 : 1);
        p.a -= dt * 0.0007;
        if (p.a <= 0) continue;

        const gg = ctxG.createRadialGradient(p.x, p.y, 0, p.x, p.y, p.r);
        gg.addColorStop(0, isDark ? `rgba(0,242,234,${p.a*0.22})` : `rgba(2,132,199,${p.a*0.18})`);
        gg.addColorStop(1, "rgba(0,0,0,0)");
        ctxG.fillStyle = gg;
        ctxG.fillRect(p.x - p.r, p.y - p.r, p.r*2, p.r*2);
      }
      engine.glow.pulses = engine.glow.pulses.filter(p => p.a > 0);
    }

    // ===== Main loop =====
    function loop(){
      const t = now();
      engine.dt = clamp(t - engine.last, 8, 34);
      engine.last = t;

      // Resize if needed
      // (Handled by event, but keep safe on orientation changes)
      drawMatrix(engine.dt);
      drawParticles(engine.dt);
      if (engine.tier !== 'low') drawGlow(engine.dt);

      requestAnimationFrame(loop);
    }

    function onResize(){
      engine.dpr = resizeCanvas(cMatrix);
      resizeCanvas(cPart);
      resizeCanvas(cGlow);
      initMatrix();
      initParticles();
    }
    window.addEventListener('resize', onResize, {passive:true});
    onResize();
    loop();

    // ---------- Card local ripple position updates (touch move) ----------
    function attachPointerPos(el){
      const update = (e) => {
        const r = el.getBoundingClientRect();
        const x = (e.clientX ?? e.touches?.[0]?.clientX) - r.left;
        const y = (e.clientY ?? e.touches?.[0]?.clientY) - r.top;
        el.style.setProperty('--mx', clamp(x / r.width * 100, 0, 100) + '%');
        el.style.setProperty('--my', clamp(y / r.height * 100, 0, 100) + '%');
      };
      el.addEventListener('pointermove', update, {passive:true});
      el.addEventListener('touchmove', update, {passive:true});
      el.addEventListener('pointerdown', update, {passive:true});
      el.addEventListener('touchstart', update, {passive:true});
    }
    $$('.card, .proj, .btn, .chip, .pillBtn').forEach(attachPointerPos);

    // ---------- Quick ‚Äúpower save‚Äù auto downshift on background tab ----------
    document.addEventListener('visibilitychange', () => {
      if (document.hidden){
        // Reduce a bit when user switches tab
        if (engine.tier === 'ultra') applyTier('mid');
      }
    });

    // ---------- Ensure FX tier buttons reflect ----------
    tierBtns.forEach(b => b.classList.toggle('on', b.dataset.tier === engine.tier));

  </script>
</body>
</html>
